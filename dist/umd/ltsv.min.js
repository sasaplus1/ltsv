/*!
 * @license ltsv.js Copyright(c) 2013 sasa+1
 * https://github.com/sasaplus1/ltsv.js
 * Released under the MIT license.
 */
/*!
 * @license ltsv.js Copyright(c) 2013 sasa+1
 * https://github.com/sasaplus1/ltsv.js
 * Released under the MIT license.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).ltsv={})}(this,(function(t){"use strict";function e(t){return/^[0-9A-Za-z_.-]+$/.test(t)}function r(t){return/^[\x01-\x08\x0B\x0C\x0E-\xFF]*$/.test(t)}function n(t,n){if(null===t||"object"!=typeof t)throw new TypeError("record must be an Object");const o=Object.keys(t),i=[];for(let c=0,f=o.length;c<f;++c){const f=o[c],u=t[o[c]];if(n&&!e(f))throw new SyntaxError(`unexpected character in label: "${f}"`);if(n&&!r(u))throw new SyntaxError(`unexpected character in value: "${u}"`);i[c]=f+":"+u}return i.join("\t")}function o(t,e){const r=Array.isArray(t);if(!r&&(null===t||"object"!=typeof t))throw new TypeError("data must be an Object or Array");const o=[];if(r)for(let r=0,i=t.length;r<i;++r)o[r]=n(t[r],e);else o.push(n(t,e));return o.join("\n")}function i(t,n){const o=String(t),i=o.indexOf(":");if(-1===i)throw new SyntaxError(`field separator is not found: "${o}"`);const c=o.slice(0,i),f=o.slice(i+1);if(n&&!e(c))throw new SyntaxError(`unexpected character in label: "${c}"`);if(n&&!r(f))throw new SyntaxError(`unexpected character in value: "${f}"`);return{label:c,value:f}}function c(t,e){const r=String(t).replace(/(?:\r?\n)+$/,"").split("\t"),n={};for(let t=0,o=r.length;t<o;++t){const{label:o,value:c}=i(r[t],e);n[o]=c}return n}function f(t,e){const r=String(t).replace(/(?:\r?\n)+$/,"").split(/\r?\n/),n=[];for(let t=0,o=r.length;t<o;++t)n[t]=c(r[t],e);return n}function u(t){return c(t,!1)}function s(t){return c(t,!0)}function a(t,e,r){let n=0,o=0,i=null;for(;;){let c=t.indexOf("\n",n);if(-1===c){if(!(e&&n<t.length))break;c=t.length-1}const f=t.slice(n,c+1);let u={};try{u=this.parse(f)}catch(t){i=t}if(i)break;r.enqueue(this.objectMode?u:JSON.stringify(u)),o=n=c+1}this.buffer=t.slice(o),i&&r.error(i)}function l(t={objectMode:!1,strict:!1}){const{objectMode:e=!1,strict:r=!1}=t,n={buffer:"",objectMode:e,parse:r?s:u};return{transform(t,e){a.call(n,n.buffer+t,!1,e)},flush(t){a.call(n,n.buffer,!0,t)}}}t.LtsvToJsonStream=l,t.createLtsvToJsonStream=function(t){return new TransformStream(l(t))},t.format=function(t){return o(t,!1)},t.formatStrict=function(t){return o(t,!0)},t.isValidLabel=e,t.isValidValue=r,t.parse=function(t){return f(t,!1)},t.parseLine=u,t.parseLineStrict=s,t.parseStrict=function(t){return f(t,!0)},t.stringify=function(t,e={strict:!1}){const{strict:r=!1}=e;return o(t,r)},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ltsv.min.js.map
